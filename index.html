<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retro Table Clock SU-71</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        body { font-family: sans-serif; user-select: none; -webkit-user-select: none; overflow: hidden; background-color: #1a202c; }
        .font-lcd { font-family: 'Share Tech Mono', monospace; }
        
        /* Custom LCD Light Effect */
        .lcd-light {
            background-color: #4ff08d !important;
            filter: brightness(1.1);
            box-shadow: 0 0 15px rgba(79,240,141,0.6);
        }

        /* Visual Chunk Styles */
        .chunk-row { display: flex; width: 100%; gap: 1px; }
        .chunk { flex: 1; background-color: rgba(0,0,0,0.05); height: 100%; border-radius: 1px; }
        .chunk.active { background-color: #111; }
        
        /* Smooth Scale Transition */
        #clock-container {
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center">

    <!-- Watch Container -->
    <!-- Initial scale set to 1, JS handles the rest -->
    <div id="clock-container" class="relative">

        <!-- WATCH CASE -->
        <div class="relative bg-gray-900 w-80 h-64 rounded-3xl shadow-2xl flex flex-col items-center justify-center border-4 border-gray-800">
            
            <!-- BUTTONS -->
            
            <!-- Top Left: Light -->
            <div id="btn-light" class="absolute -left-2 top-10 w-3 h-8 bg-gray-500 rounded-l-md shadow-lg border-r border-gray-600 z-20 cursor-pointer flex items-center justify-center active:translate-x-1 transition-transform" title="Light">
                <div class="absolute w-10 h-12 -left-2 bg-transparent"></div>
            </div>

            <!-- Top Right: Maximize / Cinema Mode (NEW) -->
            <div id="btn-maximize" class="absolute -right-2 top-10 w-3 h-8 bg-red-800 rounded-r-md shadow-lg border-l border-gray-600 z-20 cursor-pointer flex items-center justify-center active:-translate-x-1 transition-transform" title="Cinema Mode">
                <div class="absolute w-10 h-12 -right-2 bg-transparent"></div>
            </div>

            <!-- Bottom Left: Mode -->
            <div id="btn-mode" class="absolute -left-2 bottom-10 w-3 h-8 bg-gray-500 rounded-l-md shadow-lg border-r border-gray-600 z-20 cursor-pointer flex items-center justify-center active:translate-x-1 transition-transform" title="Mode">
                <div class="absolute w-10 h-12 -left-2 bg-transparent"></div>
            </div>

            <!-- Bottom Right: Beep -->
            <div id="btn-beep" class="absolute -right-2 bottom-10 w-3 h-8 bg-gray-500 rounded-r-md shadow-lg border-l border-gray-600 z-20 cursor-pointer flex items-center justify-center active:-translate-x-1 transition-transform" title="Beep">
               <div class="absolute w-10 h-12 -right-2 bg-transparent"></div>
            </div>


            <!-- FACE PLATE -->
            <div class="w-[90%] h-[85%] bg-black rounded-xl border-2 border-gray-700 relative flex flex-col items-center p-2 shadow-inner">
              
              <!-- Branding Top -->
              <div class="flex justify-between w-full px-4 mb-1 items-end">
                <span class="text-gray-400 text-[10px] font-bold tracking-widest uppercase">VENKATESH</span>
                <span class="text-gray-400 text-[10px] font-bold tracking-widest">SU-71</span>
              </div>

              <!-- Trim Lines -->
              <div class="absolute top-8 w-[92%] h-[120px] border border-blue-600 rounded-lg pointer-events-none opacity-80"></div>
              <div class="absolute top-9 w-[91%] h-[118px] border border-yellow-600 rounded-lg pointer-events-none opacity-60"></div>

              <!-- CASIO Logo -->
              <div class="w-full text-center mt-1 mb-2">
                <h1 class="text-gray-200 font-bold italic tracking-wider text-sm">CASIO</h1>
              </div>

              <!-- LCD SCREEN -->
              <div id="lcd-screen" class="relative w-[80%] h-24 bg-[#9ead98] rounded shadow-inner border-4 border-gray-600 flex flex-col p-1 transition-colors duration-200">
                
                <!-- NORMAL / REMAINING VIEW -->
                <div id="view-normal" class="w-full h-full flex flex-col justify-between relative z-10">
                    <!-- LCD Top Row -->
                    <div class="flex justify-between items-start h-8 font-mono text-gray-900">
                      <div class="flex flex-col text-[9px] leading-tight ml-1 font-bold">
                         <!-- Signal Icon -->
                         <div id="sig-icon" class="flex items-center gap-1 transition-all mt-3 opacity-20">
                            <span>SIG</span>
                            <span id="sig-note" class="text-[14px] leading-none -mt-1 hidden">â™ª</span>
                         </div>
                      </div>
    
                      <!-- Date -->
                      <div class="flex gap-2 text-sm font-semibold tracking-tighter mr-1 mt-1 font-lcd">
                         <span id="date-day-name">SU</span>
                         <span id="date-day-num">1</span>
                      </div>
                    </div>
    
                    <!-- LCD Bottom Row: TIME -->
                    <div class="flex justify-between items-end flex-grow pb-1 px-2 font-mono text-gray-900">
                       <div id="mode-indicator" class="text-[10px] mb-2 font-semibold tracking-wider">24H</div>
                       <div class="flex items-baseline gap-1">
                          <!-- Hours -->
                          <span id="time-hours" class="text-4xl font-normal tracking-tighter font-lcd">00:00</span>
                          <!-- Seconds -->
                          <span id="time-seconds" class="text-xl mb-1 font-lcd">00</span>
                       </div>
                    </div>
                </div>

                <!-- VISUAL CHUNK VIEW (Hidden by default) -->
                <div id="view-visual" class="w-full h-full absolute top-0 left-0 z-10 hidden flex flex-col justify-center gap-2 p-2">
                    <!-- Hours Row -->
                    <div class="flex items-center gap-1 h-3">
                        <span class="text-[8px] font-bold w-3">H</span>
                        <div id="chunk-row-h" class="chunk-row h-full"></div>
                    </div>
                    <!-- Minutes Row -->
                    <div class="flex items-center gap-1 h-3">
                        <span class="text-[8px] font-bold w-3">M</span>
                        <div id="chunk-row-m" class="chunk-row h-full"></div>
                    </div>
                    <!-- Seconds Row -->
                    <div class="flex items-center gap-1 h-3">
                        <span class="text-[8px] font-bold w-3">S</span>
                        <div id="chunk-row-s" class="chunk-row h-full"></div>
                    </div>
                </div>

                <!-- LCD Overlay -->
                <div class="absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black opacity-10 pointer-events-none rounded z-20"></div>
              </div>

              <!-- Bottom Text / Engraving -->
              <div class="w-full text-center mt-4 px-2">
                 <span class="text-[6px] text-gray-300 font-mono font-bold tracking-widest opacity-90 leading-tight block">"Time doesn't exist, yet it controls us anyway."</span>
              </div>

            </div>
        </div>
    </div>

    <script>
        // --- State ---
        let beepEnabled = false;
        let mode = 'normal'; // 'normal' | 'remaining' | 'visual'
        let audioCtx = null;
        let isMaximized = false; // Start in normal scale

        // --- Elements ---
        const container = document.getElementById('clock-container');
        const lcdScreen = document.getElementById('lcd-screen');
        const viewNormal = document.getElementById('view-normal');
        const viewVisual = document.getElementById('view-visual');
        
        const sigIcon = document.getElementById('sig-icon');
        const sigNote = document.getElementById('sig-note');
        const elDayName = document.getElementById('date-day-name');
        const elDayNum = document.getElementById('date-day-num');
        const elHours = document.getElementById('time-hours');
        const elSeconds = document.getElementById('time-seconds');
        const elMode = document.getElementById('mode-indicator');

        // Visual Mode Elements
        const rowH = document.getElementById('chunk-row-h');
        const rowM = document.getElementById('chunk-row-m');
        const rowS = document.getElementById('chunk-row-s');

        // --- Init Visuals ---
        function createChunks(container, count) {
            container.innerHTML = '';
            for(let i=0; i<count; i++) {
                const chunk = document.createElement('div');
                chunk.className = 'chunk';
                container.appendChild(chunk);
            }
        }
        createChunks(rowH, 24); 
        createChunks(rowM, 60); 
        createChunks(rowS, 60); 

        // --- Scaling Logic (Echo Show 8 Optimization) ---
        function updateScale() {
            // Base dimensions of the watch component (Tailwind w-80=320px, h-64=256px)
            const baseW = 320; 
            const baseH = 256;
            
            // Safe area padding
            const padding = 20;

            if (isMaximized) {
                // Calculate max scale to fit screen while maintaining aspect ratio
                const scaleX = (window.innerWidth - padding) / baseW;
                const scaleY = (window.innerHeight - padding) / baseH;
                const scale = Math.min(scaleX, scaleY);
                container.style.transform = `scale(${scale})`;
            } else {
                // Default Scale (Table Mode) - Large but reasonable
                container.style.transform = `scale(2)`;
            }
        }

        // --- Audio Logic ---
        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
        }

        function playBeep(freq = 3500, duration = 0.1) {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();

            osc.type = 'square';
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);

            osc.connect(gain);
            gain.connect(audioCtx.destination);

            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        function playHighPitchBeep() { playBeep(4000, 0.08); }
        function playButtonSound() { playBeep(2000, 0.05); }

        // --- Time Logic ---
        function updateTime() {
            const now = new Date();
            
            if (beepEnabled && now.getSeconds() === 0) {
                if (audioCtx) playHighPitchBeep();
            }

            if (mode === 'visual') {
                viewNormal.classList.add('hidden');
                viewVisual.classList.remove('hidden');

                const h = now.getHours();
                const m = now.getMinutes();
                const s = now.getSeconds();

                Array.from(rowH.children).forEach((chunk, i) => chunk.classList.toggle('active', i < h));
                Array.from(rowM.children).forEach((chunk, i) => chunk.classList.toggle('active', i < m));
                Array.from(rowS.children).forEach((chunk, i) => chunk.classList.toggle('active', i < s));

            } else {
                viewNormal.classList.remove('hidden');
                viewVisual.classList.add('hidden');

                const days = ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'];
                elDayName.innerText = days[now.getDay()];
                elDayNum.innerText = now.getDate();

                if (mode === 'normal') {
                    elMode.innerText = '24H';
                    const h = now.getHours().toString().padStart(2, '0');
                    const m = now.getMinutes().toString().padStart(2, '0');
                    const s = now.getSeconds().toString().padStart(2, '0');
                    elHours.innerText = `${h}:${m}`;
                    elSeconds.innerText = s;
                } else if (mode === 'remaining') {
                    elMode.innerText = 'REM';
                    const totalSecondsToday = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
                    const secondsInDay = 86400; 
                    let diff = secondsInDay - totalSecondsToday;
                    if (diff === 86400) diff = 0;

                    const h = Math.floor(diff / 3600).toString().padStart(2, '0');
                    const m = Math.floor((diff % 3600) / 60).toString().padStart(2, '0');
                    const s = (diff % 60).toString().padStart(2, '0');
                    
                    elHours.innerText = `${h}:${m}`;
                    elSeconds.innerText = s;
                }
            }
        }

        // --- Event Listeners ---
        
        document.getElementById('btn-light').addEventListener('click', () => {
            initAudio();
            lcdScreen.classList.add('lcd-light');
            setTimeout(() => lcdScreen.classList.remove('lcd-light'), 2000);
        });

        // Toggle Fullscreen / Maximize
        document.getElementById('btn-maximize').addEventListener('click', () => {
            initAudio();
            playButtonSound();
            isMaximized = !isMaximized;
            updateScale();
        });

        document.getElementById('btn-mode').addEventListener('click', () => {
            initAudio();
            playButtonSound();
            if (mode === 'normal') mode = 'remaining';
            else if (mode === 'remaining') mode = 'visual';
            else mode = 'normal';
            updateTime();
        });

        document.getElementById('btn-beep').addEventListener('click', () => {
            initAudio();
            playButtonSound();
            beepEnabled = !beepEnabled;
            if (beepEnabled) {
                sigIcon.classList.remove('opacity-20');
                sigIcon.classList.add('opacity-100', 'text-black', 'font-extrabold');
                sigNote.classList.remove('hidden');
            } else {
                sigIcon.classList.add('opacity-20');
                sigIcon.classList.remove('opacity-100', 'text-black', 'font-extrabold');
                sigNote.classList.add('hidden');
            }
        });

        // Initialize Scaling
        window.addEventListener('resize', updateScale);
        updateScale(); // Initial call
        
        // Start Loop
        setInterval(updateTime, 1000);
        updateTime(); 
    </script>
</body>
</html>
